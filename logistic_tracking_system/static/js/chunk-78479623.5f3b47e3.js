(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-78479623"],{"037d":function(t,e,a){},5739:function(t,e,a){"use strict";a("037d")},"98c5":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"formDiv"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"产品名称"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:t.listQuery.product_name,callback:function(e){t.$set(t.listQuery,"product_name",e)},expression:"listQuery.product_name"}})],1),a("el-form-item",{attrs:{label:"规格型号"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:t.listQuery.rule,callback:function(e){t.$set(t.listQuery,"rule",e)},expression:"listQuery.rule"}})],1),a("el-form-item",{attrs:{label:"状态"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:t.listQuery.product_status,callback:function(e){t.$set(t.listQuery,"product_status",e)},expression:"listQuery.product_status"}},[a("el-option",{attrs:{label:"启用",value:"启用"}}),a("el-option",{attrs:{label:"禁用",value:"禁用"}})],1)],1),a("el-form-item",{staticStyle:{"margin-left":"20px !important"}},[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:t.searchBtn}},[t._v("查询")]),a("el-button",{attrs:{size:"medium"},on:{click:function(e){return t.resetForm()}}},[t._v("重置")])],1)],1)],1),a("el-card",{staticClass:"box-card mt20"},[a("div",{},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"medium",plain:""},on:{click:t.addBtn}},[a("i",{staticClass:"el-icon-plus"}),t._v(" 新增")])],1)],1),a("ELTable",{attrs:{tableCol:t.tableCol,tableData:t.tableData,listQuery:t.listQuery,ispagination:t.ispagination},on:{currentChange:t.currentChange,sizeChange:t.sizeChange}})],1)]),a("el-dialog",{attrs:{title:t.dialogTitle,width:"1000px",visible:t.dialogFlag,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogFlag=e}}},[a("el-form",{ref:"dialogFormRef",staticStyle:{padding:"0 60px 0 20px"},attrs:{model:t.dialogForm,rules:t.dialogFormRules,"label-width":"100px"}},[a("el-row",[a("p",{staticClass:"dialog-title"},[t._v("基本信息")]),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"产品名称",prop:"product_name"}},[a("el-input",{model:{value:t.dialogForm.product_name,callback:function(e){t.$set(t.dialogForm,"product_name",e)},expression:"dialogForm.product_name"}})],1),a("el-form-item",{attrs:{label:"状态",prop:"product_status"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:t.dialogForm.product_status,callback:function(e){t.$set(t.dialogForm,"product_status",e)},expression:"dialogForm.product_status"}},[a("el-option",{attrs:{label:"启用",value:"启用"}}),a("el-option",{attrs:{label:"禁用",value:"禁用"}})],1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"产品编号",prop:"product_id"}},[a("el-input",{attrs:{readonly:t.productIdReadonly},model:{value:t.dialogForm.product_id,callback:function(e){t.$set(t.dialogForm,"product_id",e)},expression:"dialogForm.product_id"}})],1),a("el-form-item",{attrs:{label:"规格型号",prop:"rule"}},[a("el-input",{model:{value:t.dialogForm.rule,callback:function(e){t.$set(t.dialogForm,"rule",e)},expression:"dialogForm.rule"}})],1)],1)],1),a("el-form-item",{attrs:{label:"备注",prop:"description"}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.dialogForm.description,callback:function(e){t.$set(t.dialogForm,"description",e)},expression:"dialogForm.description"}})],1),a("p",{staticClass:"dialog-title"},[t._v("物料明细")]),a("el-button",{attrs:{type:"primary",size:"small",plain:""},on:{click:function(e){return t.AddListRow()}}},[t._v("添加物料")]),a("el-table",{staticClass:"dialogTable",staticStyle:{width:"100%"},attrs:{data:t.dialogForm.response_datas,height:"240"}},[a("el-table-column",{attrs:{fixed:"left",label:"物料名称",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-form-item",{attrs:{prop:"response_datas."+e.$index+".matter_name"}},[a("el-input",{model:{value:e.row.matter_name,callback:function(a){t.$set(e.row,"matter_name",a)},expression:"scope.row.matter_name"}})],1)]}}])}),a("el-table-column",{attrs:{label:"规格型号",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-form-item",{attrs:{prop:"response_datas."+e.$index+".rule"}},[a("el-input",{model:{value:e.row.rule,callback:function(a){t.$set(e.row,"rule",a)},expression:"scope.row.rule"}})],1)]}}])}),a("el-table-column",{attrs:{label:"类型",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-form-item",{attrs:{prop:"response_datas."+e.$index+".matter_category"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.row.matter_category,callback:function(a){t.$set(e.row,"matter_category",a)},expression:"scope.row.matter_category"}},[a("el-option",{attrs:{label:"A类",value:"A类"}}),a("el-option",{attrs:{label:"B类",value:"B类"}}),a("el-option",{attrs:{label:"其他",value:"其他"}})],1)],1)]}}])}),a("el-table-column",{attrs:{label:"数量",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-form-item",{attrs:{prop:"response_datas."+e.$index+".matter_usage",rules:[{required:!0,message:"数量不能为空"},{type:"number",message:"数量必须为数值"}]}},[a("el-input",{model:{value:e.row.matter_usage,callback:function(a){t.$set(e.row,"matter_usage",t._n(a))},expression:"scope.row.matter_usage"}})],1)]}}])}),a("el-table-column",{attrs:{label:"操作",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-form-item",[a("el-button",{attrs:{size:"small",type:"danger",plain:""},on:{click:function(a){return t.handleDelete(e.$index,e.row)}}},[t._v("删除")])],1)]}}])})],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFlag=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.dialogSave}},[t._v("确 定")])],1)],1)],1)},l=[],i=(a("a4d3"),a("e01a"),a("a434"),a("a927")),r=a("fd03"),s=(a("4328"),{name:"ProjectBOM",components:{ELTable:i["a"]},data:function(){return{listQuery:{product_name:"",rule:"",product_status:"",page:1,page_size:10,total:0},listQueryBase:{product_name:"",rule:"",product_status:"",page:1,page_size:10,total:0},ispagination:!0,productIdReadonly:!1,dialogTitle:"",dialogFlag:!1,dialogForm:{prodect_code:"",product_name:"",product_id:"",rule:"",product_status:"",description:"",response_datas:[{matter_name:"",rule:"",matter_category:"",matter_usage:""}]},dialogFormBase:{prodect_code:"",product_name:"",product_id:"",rule:"",product_status:"",description:"",response_datas:[{matter_name:"",rule:"",matter_category:"",matter_usage:""}]},dialogFormRules:{product_name:[{required:!0,message:"请输入产品名称",trigger:"blur"}],product_id:[{required:!0,message:"请输入产品编号",trigger:"blur"},{min:3,max:18,message:"长度为3~18个字节!",trigger:"blur"},{trigger:"blur",validator:function(t,e,a){var o=/^[a-z]+$/;console.log(o.test(e)),o.test(e)?a():a(new Error("仅允许小写字母!"))}}]},tableCol:[{label:"产品内码",field:"prodect_code",align:"center"},{label:"产品名称",field:"product_name",align:"center"},{label:"产品编号",field:"product_id",align:"center"},{label:"规格型号",field:"rule",align:"center"},{label:"状态",field:"product_status",align:"center"},{label:"备注",field:"description",align:"center"},{label:"操作",colType:"solt",align:"center",option:[{label:"修改",event:this.colEditBtn},{label:"删除",event:this.colDeleteBtn}]}],tableData:[]}},methods:{searchBtn:function(){this.listQuery.page=1,this.getLogisticBOMProductList(this.listQuery)},resetForm:function(){this.listQuery=JSON.parse(JSON.stringify(this.listQueryBase)),this.getLogisticBOMProductList(this.listQuery)},currentChange:function(t){this.listQuery.page=t,this.getLogisticBOMProductList(this.listQuery)},sizeChange:function(t){this.listQuery.page=1,this.listQuery.page_size=t,this.getLogisticBOMProductList(this.listQuery)},getLogisticBOMProductList:function(t){var e=this;r["a"].getLogisticBOMProductList(t).then((function(t){console.log("产品结构 查询",t),0==t.code?(e.tableData=t.data.data,e.listQuery.total=t.data.total):e.$message({message:t.message,type:"error"})}))},postLogisticBOMProductList:function(t){var e=this;r["a"].postLogisticBOMProductList(t).then((function(t){console.log("产品结构 新增",t),0==t.code?(e.dialogFlag=!1,e.getLogisticBOMProductList(e.listQuery),e.$message({message:t.message,type:"success"})):e.$message({message:t.message,type:"error"})}))},colEditBtn:function(t){var e=this;console.log(t),this.dialogTitle="修改产品",this.dialogFlag=!0,this.productIdReadonly=!0,this.$nextTick((function(){e.$refs.dialogFormRef.clearValidate()})),this.dialogForm={prodect_code:t.prodect_code,product_id:t.product_id,product_name:t.product_name,rule:t.rule,product_status:t.product_status,description:t.description,response_datas:t.response_datas}},getLogisticPutBOMProductList:function(t){var e=this;r["a"].getLogisticPutBOMProductList(t).then((function(t){console.log("修改产品 修改",t),0==t.code?(e.dialogFlag=!1,e.getLogisticBOMProductList(e.listQuery),e.$message({message:t.message,type:"success"})):e.$message({message:t.message,type:"error"})}))},addBtn:function(){var t=this;this.dialogTitle="新增产品",this.dialogFlag=!0,this.productIdReadonly=!1,this.$nextTick((function(){t.$refs.dialogFormRef.clearValidate()})),this.dialogForm=JSON.parse(JSON.stringify(this.dialogFormBase))},AddListRow:function(){this.dialogForm.response_datas.push({matter_name:"",rule:"",matter_category:"",matter_usage:""})},dialogSave:function(){var t=this;this.$refs.dialogFormRef.validate((function(e){e?"新增产品"==t.dialogTitle?(console.log("新增产品",t.dialogForm),t.postLogisticBOMProductList(t.dialogForm)):(console.log("修改产品",t.dialogForm),t.dialogForm.response_datas=JSON.stringify(t.dialogForm.response_datas),console.log("this.dialogForm.response_datas",t.dialogForm.response_datas),t.getLogisticPutBOMProductList(t.dialogForm)):t.$message({message:"请修改正确的数据格式！",type:"warning"})}))},getLogisticDeleteBOMProductList:function(t){var e=this;r["a"].getLogisticDeleteBOMProductList(t).then((function(t){console.log("产品结构 删除",t),0==t.code?(e.getLogisticBOMProductList(e.listQuery),e.$message({message:t.message,type:"success"})):e.$message({message:t.message,type:"error"})}))},handleDelete:function(t,e){var a=this;e.bom_matter_code?this.$confirm("确定执行删除操作吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var o={prodect_code:e.prodect_code,response_datas:JSON.stringify([{bom_matter_code:e.bom_matter_code}])};a.getLogisticDeleteBOMProductList(o),a.dialogForm.response_datas.splice(t,1)})):this.dialogForm.response_datas.splice(t,1)},colDeleteBtn:function(t){var e=this;this.$confirm("确定执行删除操作吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a={prodect_code:t.prodect_code,response_datas:JSON.stringify([])};e.getLogisticDeleteBOMProductList(a)}))}},mounted:function(){this.getLogisticBOMProductList(this.listQuery)}}),n=s,c=(a("5739"),a("2877")),u=Object(c["a"])(n,o,l,!1,null,"ad22e70a",null);e["default"]=u.exports},a434:function(t,e,a){"use strict";var o=a("23e7"),l=a("23cb"),i=a("a691"),r=a("50c4"),s=a("7b0b"),n=a("65f0"),c=a("8418"),u=a("1dde"),d=u("splice"),p=Math.max,g=Math.min,m=9007199254740991,f="Maximum allowed length exceeded";o({target:"Array",proto:!0,forced:!d},{splice:function(t,e){var a,o,u,d,h,_,y=s(this),b=r(y.length),v=l(t,b),F=arguments.length;if(0===F?a=o=0:1===F?(a=0,o=b-v):(a=F-2,o=g(p(i(e),0),b-v)),b+a-o>m)throw TypeError(f);for(u=n(y,o),d=0;d<o;d++)h=v+d,h in y&&c(u,d,y[h]);if(u.length=o,a<o){for(d=v;d<b-o;d++)h=d+o,_=d+a,h in y?y[_]=y[h]:delete y[_];for(d=b;d>b-o+a;d--)delete y[d-1]}else if(a>o)for(d=b-o;d>v;d--)h=d+o-1,_=d+a-1,h in y?y[_]=y[h]:delete y[_];for(d=0;d<a;d++)y[d+v]=arguments[d+2];return y.length=b-o+a,u}})},a927:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,"header-cell-style":{background:"#eef1f6",color:"#606266"}},on:{"selection-change":t.handleSelectionChange}},[t.isShowSelect?a("el-table-column",{attrs:{type:"selection",width:"55"}}):t._e(),t._l(t.tableCol,(function(e,o){return["solt"==e.colType?a("el-table-column",{key:o+"only",attrs:{prop:e.field,label:e.label,width:e.width,align:e.align?e.align:"left"},scopedSlots:t._u([{key:"default",fn:function(o){return t._l(e.option,(function(e,l){return a("el-button",{key:l+"only",attrs:{type:"text",size:"small"},on:{click:function(t){return e.event(o.row)}}},[t._v(t._s(e.label))])}))}}],null,!0)}):a("el-table-column",{key:o+"only",attrs:{prop:e.field,label:e.label,width:e.width,align:e.align?e.align:"left"}})]}))],2),t.ispagination?a("div",{staticClass:"pagination-wrap"},[a("el-pagination",{attrs:{"current-page":t.listQuery.page,"page-sizes":[5,10,20,30,40,50,100],"page-size":t.listQuery.page_size,layout:"total, sizes, prev, pager, next, jumper",total:t.listQuery.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1):t._e()],1)},l=[],i={name:"ELTable",props:{tableCol:{type:Array,default:function(){return[]}},tableData:{type:Array,default:function(){return[]}},ispagination:{type:Boolean,default:!0},isShowSelect:{type:Boolean,default:!1},listQuery:{type:Object,default:function(){return{page:1,page_size:10,total:0}}}},data:function(){return{}},methods:{handleSizeChange:function(t){this.$emit("sizeChange",t)},handleCurrentChange:function(t){this.$emit("currentChange",t)},handleSelectionChange:function(t){this.$emit("handleSelectionChange",t)}}},r=i,s=a("2877"),n=Object(s["a"])(r,o,l,!1,null,"f6412f26",null);e["a"]=n.exports},e01a:function(t,e,a){"use strict";var o=a("23e7"),l=a("83ab"),i=a("da84"),r=a("5135"),s=a("861d"),n=a("9bf2").f,c=a("e893"),u=i.Symbol;if(l&&"function"==typeof u&&(!("description"in u.prototype)||void 0!==u().description)){var d={},p=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof p?new u(t):void 0===t?u():u(t);return""===t&&(d[e]=!0),e};c(p,u);var g=p.prototype=u.prototype;g.constructor=p;var m=g.toString,f="Symbol(test)"==String(u("test")),h=/^Symbol\((.*)\)[^)]+$/;n(g,"description",{configurable:!0,get:function(){var t=s(this)?this.valueOf():this,e=m.call(t);if(r(d,t))return"";var a=f?e.slice(7,-1):e.replace(h,"$1");return""===a?void 0:a}}),o({global:!0,forced:!0},{Symbol:p})}}}]);
//# sourceMappingURL=chunk-78479623.5f3b47e3.js.map