(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d01bb"],{6726:function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-card",[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("span",[e._v("工站编号 : "+e._s(e.CurrentUserInfo.work_id))]),r("span",{staticClass:"ml20"},[e._v("工站名称 : "+e._s(e.workStationName))]),r("span",{staticClass:"ml20"},[e._v("工站类型 : "+e._s(e.CurrentUserInfo.work_type))])]),r("el-form",{ref:"formRef",staticStyle:{padding:"0 60px 0 20px",width:"650px"},attrs:{model:e.form,rules:e.formRules,"label-width":"100px"}},[r("el-form-item",{attrs:{prop:"finished_product_code",label:"产品编号"}},[r("el-input",{ref:"firstInput",on:{input:function(t){return e.inputChange()}},model:{value:e.form.finished_product_code,callback:function(t){e.$set(e.form,"finished_product_code",t)},expression:"form.finished_product_code"}})],1),e._l(e.form.response_datas,(function(t,o){return r("div",{key:o+" onlyItem"},[r("el-form-item",{attrs:{prop:"response_datas."+o+".matter_id",rules:[{required:!0,message:"物料编码不能为空",trigger:"blur"},{pattern:t.rule,message:"编码需要包含"+t.rule,trigger:"blur"}],label:t.matter_name}},[r("el-input",{ref:"matterInput"+o,refInFor:!0,model:{value:t.matter_id,callback:function(r){e.$set(t,"matter_id",r)},expression:"item.matter_id"}})],1)],1)})),e.form.finished_product_code?r("el-form-item",{attrs:{prop:"return_work_id",label:"返回工站"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.form.return_work_id,callback:function(t){e.$set(e.form,"return_work_id",t)},expression:"form.return_work_id"}},e._l(e.WorkCodeNameList,(function(e,t){return r("el-option",{key:t+" dialogForm",attrs:{label:e.work_name,value:e.work_id}})})),1)],1):e._e()],2),e.form.finished_product_code?r("div",[r("el-button",{on:{click:e.resetForm}},[e._v("重 置")]),r("el-button",{attrs:{type:"primary"},on:{click:e.dialogSave}},[e._v("确 定")])],1):e._e()],1)],1)},s=[],i=r("5530"),a=(r("159b"),r("fd03")),n=r("2f62"),d={name:"MissStationM",data:function(){return{timeout:"",listQuery:{finished_product_code:""},listQueryBase:{finished_product_code:""},form:{return_work_id:"",finished_product_code:"",response_datas:[]},formBase:{return_work_id:"",finished_product_code:"",response_datas:[]},formRules:{finished_product_code:[{required:!0,message:"请输入产品编号",trigger:"blur"}],test_result:[{required:!0,message:"请选择检验结果",trigger:"change"}]},response_datasRules:{matter_id:[{required:!0,message:"数量不能为空",trigger:"blur"}]}}},computed:Object(i["a"])({},Object(n["c"])(["BomMatterCodeNameList","WorkCodeNameList","CurrentUserInfo"])),methods:Object(i["a"])(Object(i["a"])({},Object(n["b"])(["getLogisticBomMatterCodeName","getLogisticWorkCodeName"])),{},{inputChange:function(e){var t=this;this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((function(){t.getLogisticFinishedCodeGetMatterCodeID(t.form)}),500)},getLogisticFinishedCodeGetMatterCodeID:function(e){var t=this;a["a"].getLogisticFinishedCodeGetMatterCodeID(e).then((function(e){if(console.log("通过产品编号查询物料 查询",e),0==e.code){var r=e.data;r.forEach((function(e,r){t.BomMatterCodeNameList.forEach((function(t){e.matter_code==t.matter_code&&(e.matter_name=t.matter_name,e.rule=t.rule)}))})),t.form.response_datas=e.data}else t.$message({message:e.message,type:"error"})}))},getDeleteFinishedCodeGetMatterCodeID:function(e){var t=this;a["a"].getDeleteFinishedCodeGetMatterCodeID(e).then((function(e){console.log("重 置 删除",e),0==e.code?(t.form=JSON.parse(JSON.stringify(t.formBase)),t.$message({message:e.message,type:"success"})):t.$message({message:e.message,type:"error"})}))},resetForm:function(){var e=this;this.$confirm("确定执行重置操作吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.getDeleteFinishedCodeGetMatterCodeID(e.form),e.$nextTick((function(){e.$refs.formRef.clearValidate()}))}))},getLogisticPutFinishedCodeGetMatterCodeID:function(e){var t=this;a["a"].getLogisticPutFinishedCodeGetMatterCodeID(e).then((function(e){console.log("产品过站 修改",e),0==e.code?(t.form=JSON.parse(JSON.stringify(t.formBase)),t.$nextTick((function(){t.$refs.formRef.clearValidate()})),t.$message({message:e.message,type:"success"})):t.$message({message:e.message,type:"error"})}))},dialogSave:function(){console.log("this.form",this.form);var e=JSON.parse(JSON.stringify(this.form));e.response_datas=JSON.stringify(this.form.response_datas),this.getLogisticPutFinishedCodeGetMatterCodeID(e)}}),mounted:function(){var e=this;this.getLogisticBomMatterCodeName(),this.getLogisticWorkCodeName(),this.WorkCodeNameList.forEach((function(t){e.CurrentUserInfo.work_id==t.work_id&&(e.workStationName=t.work_name)})),this.$nextTick((function(){e.$refs.firstInput.focus()}))}},c=d,m=r("2877"),u=Object(m["a"])(c,o,s,!1,null,null,null);t["default"]=u.exports}}]);
//# sourceMappingURL=chunk-2d0d01bb.7d13428e.js.map